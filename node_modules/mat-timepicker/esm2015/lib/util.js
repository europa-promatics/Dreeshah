export function twoDigits(n) {
    return n < 10 ? `0${n}` : `${n}`;
}
export function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
}
export function convertHoursForMode(hour, mode) {
    const isPm = hour >= 12;
    if (mode === '24h') {
        return { hour, isPm };
    }
    else if (hour === 0 || hour === 12) {
        return { hour: 12, isPm };
    }
    else if (hour < 12) {
        return { hour, isPm };
    }
    return { hour: hour - 12, isPm };
}
function mod(a, b) {
    return a - Math.floor(a / b) * b;
}
export function getShortestAngle(from, to) {
    const difference = to - from;
    return from + mod(difference + 180, 360) - 180;
}
export function isDateInRange(minDate, maxDate, current) {
    const unixCurrentDate = +current;
    return (!minDate || +minDate <= unixCurrentDate) && (!maxDate || unixCurrentDate <= +maxDate);
}
export function isTimeInRange(minDate, maxDate, current) {
    if (minDate instanceof Date) {
        const newMinDate = new Date();
        newMinDate.setHours(minDate.getHours());
        newMinDate.setMinutes(minDate.getMinutes());
        newMinDate.setSeconds(0);
        newMinDate.setMilliseconds(0);
        minDate = newMinDate;
    }
    if (maxDate instanceof Date) {
        const newMaxDate = new Date();
        newMaxDate.setHours(maxDate.getHours());
        newMaxDate.setMinutes(maxDate.getMinutes());
        newMaxDate.setSeconds(0);
        newMaxDate.setMilliseconds(0);
        maxDate = newMaxDate;
    }
    if (current instanceof Date) {
        const newCurrent = new Date();
        newCurrent.setHours(current.getHours());
        newCurrent.setMinutes(current.getMinutes());
        newCurrent.setSeconds(0);
        newCurrent.setMilliseconds(0);
        current = newCurrent;
    }
    const unixCurrentDate = +current;
    return (!minDate || +minDate <= unixCurrentDate) && (!maxDate || unixCurrentDate <= +maxDate);
}
// used when generating the allowed maps
export function isAllowed(hour, minutes, minDate, maxDate, clockMode, selectedMeridiem) {
    if (hour > 24 || hour < 0 || minutes > 60 || minutes < 0) {
        return false;
    }
    if (!minDate && !maxDate) {
        return true;
    }
    if (clockMode === '12h') {
        if (hour === 12 && selectedMeridiem === 'AM') {
            hour = 0;
        }
        if (hour > 12) {
            hour -= 12;
        }
    }
    const checkDate = new Date();
    checkDate.setHours(hour);
    checkDate.setMinutes(minutes);
    checkDate.setSeconds(0);
    checkDate.setMilliseconds(0);
    return isDateInRange(minDate, maxDate, checkDate);
}
// used by the clock component to visually disable the not allowed values
export function getIsAvailabeFn(allowed12HourMap, allowed24HourMap, mode) {
    return (value, viewType, isPm, h) => {
        const isHourCheck = viewType === 'hours';
        const [hour, minutes] = isHourCheck ? [value, null] : [h, value];
        if (mode === '12h') {
            if (!allowed12HourMap) {
                return true;
            }
            const meridiem = isPm ? 'pm' : 'am';
            if (isHourCheck) {
                return !!Object.values(allowed12HourMap[meridiem][hour]).find(v => v === true);
            }
            return allowed12HourMap[meridiem][hour][minutes];
        }
        if (!allowed24HourMap) {
            return true;
        }
        if (isHourCheck) {
            return !!Object.values(allowed24HourMap[hour]).find(v => v === true);
        }
        return allowed24HourMap[hour][minutes];
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL21hdC10aW1lcGlja2VyL3NyYy9saWIvdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLFVBQVUsU0FBUyxDQUFDLENBQUM7SUFDekIsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO0FBQ25DLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUFDLElBQVUsRUFBRSxJQUFZO0lBQzlDLE1BQU0sTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3hDLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLFVBQVUsbUJBQW1CLENBQUMsSUFBWSxFQUFFLElBQWU7SUFDL0QsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN4QixJQUFJLElBQUksS0FBSyxLQUFLLEVBQUU7UUFDbEIsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztLQUN2QjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFO1FBQ3BDLE9BQU8sRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO0tBQzNCO1NBQU0sSUFBSSxJQUFJLEdBQUcsRUFBRSxFQUFFO1FBQ3BCLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7S0FDdkI7SUFDRCxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDbkMsQ0FBQztBQUVELFNBQVMsR0FBRyxDQUFDLENBQUMsRUFB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QUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNwQyxJQUFJLFdBQVcsRUFBRTtnQkFDZixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO2FBQ2hGO1lBQ0QsT0FBTyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNsRDtRQUVELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDO1NBQUU7UUFFdkMsSUFBSSxXQUFXLEVBQUU7WUFDZixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO1NBQ3RFO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVRpbWVEYXRhLCBDbG9ja1ZpZXdUeXBlLCBDbG9ja01vZGUgfSBmcm9tICcuL2ludGVyZmFjZXMtYW5kLXR5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHR3b0RpZ2l0cyhuKSB7XG4gIHJldHVybiBuIDwgMTAgPyBgMCR7bn1gIDogYCR7bn1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRGF5cyhkYXRlOiBEYXRlLCBkYXlzOiBudW1iZXIpIHtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IERhdGUoZGF0ZSk7XG4gIHJlc3VsdC5zZXREYXRlKHJlc3VsdC5nZXREYXRlKCkgKyBkYXlzKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRIb3Vyc0Zvck1vZGUoaG91cjogbnVtYmVyLCBtb2RlOiBDbG9ja01vZGUpIHtcbiAgY29uc3QgaXNQbSA9IGhvdXIgPj0gMTI7XG4gIGlmIChtb2RlID09PSAnMjRoJykge1xuICAgIHJldHVybiB7IGhvdXIsIGlzUG0gfTtcbiAgfSBlbHNlIGlmIChob3VyID09PSAwIHx8IGhvdXIgPT09IDEyKSB7XG4gICAgcmV0dXJuIHsgaG91cjogMTIsIGlzUG0gfTtcbiAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICByZXR1cm4geyBob3VyLCBpc1BtIH07XG4gIH1cbiAgcmV0dXJuIHsgaG91cjogaG91ciAtIDEyLCBpc1BtIH07XG59XG5cbmZ1bmN0aW9uIG1vZChhLCBiKSB7XG4gIHJldHVybiBhIC0gTWF0aC5mbG9vcihhIC8gYikgKiBiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hvcnRlc3RBbmdsZShmcm9tLCB0bykge1xuICBjb25zdCBkaWZmZXJlbmNlID0gdG8gLSBmcm9tO1xuICByZXR1cm4gZnJvbSArIG1vZChkaWZmZXJlbmNlICsgMTgwLCAzNjApIC0gMTgwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlSW5SYW5nZShtaW5EYXRlOiBEYXRlLCBtYXhEYXRlOiBEYXRlLCBjdXJyZW50OiBEYXRlKSB7XG4gIGNvbnN0IHVuaXhDdXJyZW50RGF0ZSA9ICtjdXJyZW50O1xuICByZXR1cm4gKCFtaW5EYXRlIHx8ICttaW5EYXRlIDw9IHVuaXhDdXJyZW50RGF0ZSkgJiYgKCFtYXhEYXRlIHx8IHVuaXhDdXJyZW50RGF0ZSA8PSArbWF4RGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RpbWVJblJhbmdlKG1pbkRhdGU6IERhdGUsIG1heERhdGU6IERhdGUsIGN1cnJlbnQ6IERhdGUpIHtcbiAgaWYgKG1pbkRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgY29uc3QgbmV3TWluRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgbmV3TWluRGF0ZS5zZXRIb3VycyhtaW5EYXRlLmdldEhvdXJzKCkpO1xuICAgIG5ld01pbkRhdGUuc2V0TWludXRlcyhtaW5EYXRlLmdldE1pbnV0ZXMoKSk7XG4gICAgbmV3TWluRGF0ZS5zZXRTZWNvbmRzKDApO1xuICAgIG5ld01pbkRhdGUuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgIG1pbkRhdGUgPSBuZXdNaW5EYXRlO1xuICB9XG4gIGlmIChtYXhEYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIGNvbnN0IG5ld01heERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIG5ld01heERhdGUuc2V0SG91cnMobWF4RGF0ZS5nZXRIb3VycygpKTtcbiAgICBuZXdNYXhEYXRlLnNldE1pbnV0ZXMobWF4RGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgIG5ld01heERhdGUuc2V0U2Vjb25kcygwKTtcbiAgICBuZXdNYXhEYXRlLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICBtYXhEYXRlID0gbmV3TWF4RGF0ZTtcbiAgfVxuICBpZiAoY3VycmVudCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICBjb25zdCBuZXdDdXJyZW50ID0gbmV3IERhdGUoKTtcbiAgICBuZXdDdXJyZW50LnNldEhvdXJzKGN1cnJlbnQuZ2V0SG91cnMoKSk7XG4gICAgbmV3Q3VycmVudC5zZXRNaW51dGVzKGN1cnJlbnQuZ2V0TWludXRlcygpKTtcbiAgICBuZXdDdXJyZW50LnNldFNlY29uZHMoMCk7XG4gICAgbmV3Q3VycmVudC5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgY3VycmVudCA9IG5ld0N1cnJlbnQ7XG4gIH1cbiAgY29uc3QgdW5peEN1cnJlbnREYXRlID0gK2N1cnJlbnQ7XG4gIHJldHVybiAoIW1pbkRhdGUgfHwgK21pbkRhdGUgPD0gdW5peEN1cnJlbnREYXRlKSAmJiAoIW1heERhdGUgfHwgdW5peEN1cnJlbnREYXRlIDw9ICttYXhEYXRlKTtcbn1cblxuLy8gdXNlZCB3aGVuIGdlbmVyYXRpbmcgdGhlIGFsbG93ZWQgbWFwc1xuXG5leHBvcnQgZnVuY3Rpb24gaXNBbGxvd2VkKFxuICBob3VyOiBudW1iZXIsXG4gIG1pbnV0ZXM6IG51bWJlcixcbiAgbWluRGF0ZTogRGF0ZSxcbiAgbWF4RGF0ZTogRGF0ZSxcbiAgY2xvY2tNb2RlOiBDbG9ja01vZGUsXG4gIHNlbGVjdGVkTWVyaWRpZW0/OiAnQU0nIHwgJ1BNJ1xuKSB7XG4gIGlmIChob3VyID4gMjQgfHwgaG91ciA8IDAgfHwgbWludXRlcyA+IDYwIHx8IG1pbnV0ZXMgPCAwKSB7IHJldHVybiBmYWxzZTsgfVxuXG4gIGlmICghbWluRGF0ZSAmJiAhbWF4RGF0ZSkgeyByZXR1cm4gdHJ1ZTsgfVxuXG4gIGlmIChjbG9ja01vZGUgPT09ICcxMmgnKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyICYmIHNlbGVjdGVkTWVyaWRpZW0gPT09ICdBTScpIHsgaG91ciA9IDA7IH1cbiAgICBpZiAoaG91ciA+IDEyKSB7IGhvdXIgLT0gMTI7IH1cbiAgfVxuICBjb25zdCBjaGVja0RhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gIGNoZWNrRGF0ZS5zZXRIb3Vycyhob3VyKTtcbiAgY2hlY2tEYXRlLnNldE1pbnV0ZXMobWludXRlcyk7XG4gIGNoZWNrRGF0ZS5zZXRTZWNvbmRzKDApO1xuICBjaGVja0RhdGUuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG4gIHJldHVybiBpc0RhdGVJblJhbmdlKG1pbkRhdGUsIG1heERhdGUsIGNoZWNrRGF0ZSk7XG59XG5cbi8vIHVzZWQgYnkgdGhlIGNsb2NrIGNvbXBvbmVudCB0byB2aXN1YWxseSBkaXNhYmxlIHRoZSBub3QgYWxsb3dlZCB2YWx1ZXNcblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzQXZhaWxhYmVGbihhbGxvd2VkMTJIb3VyTWFwLCBhbGxvd2VkMjRIb3VyTWFwLCBtb2RlOiBDbG9ja01vZGUpIHtcbiAgcmV0dXJuICh2YWx1ZTogbnVtYmVyLCB2aWV3VHlwZTogQ2xvY2tWaWV3VHlwZSwgaXNQbTogYm9vbGVhbiwgaD86IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGlzSG91ckNoZWNrID0gdmlld1R5cGUgPT09ICdob3Vycyc7XG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZXNdID0gaXNIb3VyQ2hlY2sgPyBbdmFsdWUsIG51bGxdIDogW2gsIHZhbHVlXTtcblxuICAgIGlmIChtb2RlID09PSAnMTJoJykge1xuICAgICAgaWYgKCFhbGxvd2VkMTJIb3VyTWFwKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICBjb25zdCBtZXJpZGllbSA9IGlzUG0gPyAncG0nIDogJ2FtJztcbiAgICAgIGlmIChpc0hvdXJDaGVjaykge1xuICAgICAgICByZXR1cm4gISFPYmplY3QudmFsdWVzKGFsbG93ZWQxMkhvdXJNYXBbbWVyaWRpZW1dW2hvdXJdKS5maW5kKHYgPT4gdiA9PT0gdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWxsb3dlZDEySG91ck1hcFttZXJpZGllbV1baG91cl1bbWludXRlc107XG4gICAgfVxuXG4gICAgaWYgKCFhbGxvd2VkMjRIb3VyTWFwKSB7IHJldHVybiB0cnVlOyB9XG5cbiAgICBpZiAoaXNIb3VyQ2hlY2spIHtcbiAgICAgIHJldHVybiAhIU9iamVjdC52YWx1ZXMoYWxsb3dlZDI0SG91ck1hcFtob3VyXSkuZmluZCh2ID0+IHYgPT09IHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gYWxsb3dlZDI0SG91ck1hcFtob3VyXVttaW51dGVzXTtcbiAgfTtcbn1cbiJdfQ==