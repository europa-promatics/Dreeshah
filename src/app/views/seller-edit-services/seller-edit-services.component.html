<app-seller-header></app-seller-header>
<div class="seller-cr-ordr-mgmt-wrpr">
    <div class="custom-container d-flex">
        <app-seller-sidebar></app-seller-sidebar>
        <div class="main-wrap">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <h1>Edit Service</h1>
                        </div>
                        <div class="col-md-12">
                            <div class="cr-ordr-frm">
                                <div class="card">
                                    <div class="card-body">
                                        <form [formGroup]="formGroup">
                                            <div class="form-group">
                                                <mat-form-field appearance="">
                                                    <mat-label>Service Name</mat-label>
                                                    <input matInput placeholder="Service Name"
                                                        formControlName="service_name">
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_name.invalid && (formGroup.controls.service_name.dirty || formGroup.controls.service_name.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_name.errors.required">
                                                        Service name is required
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group signup-form">
                                                <label class="custom-label">Add Service Image</label>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <img *ngIf="!service_img"
                                                            src="{{image_path}}{{Service_data?.service_image}}"
                                                            alt="service image" class="serv-img-thumb">
                                                        <label>
                                                            <span class="btn btn-round-blue custm--edit">
                                                                <input type="file" style="display: none;"
                                                                    class="form-control custom-file-upload"
                                                                    (change)="onFileChange($event)" accept="image/jpeg,image/jpg,image/png,image/gif">
                                                                <i class="fa fa-edit"></i>
                                                            </span>
                                                        </label>
                                                        <img *ngIf="service_img" [src]="service_img"
                                                            class="serv-img-thumb">
                                                        <label>
                                                            <span class="btn btn-round-blue custm--edit">
                                                                <input type="file" style="display: none;"
                                                                    class="form-control custom-file-upload"
                                                                    (change)="onFileChange($event)" accept="image/jpeg,image/jpg,image/png,image/gif">
                                                                <i class="fa fa-edit"></i>
                                                            </span>
                                                        </label>
                                                        <!-- <label>
                                                            <span class="btn btn-change-fill"><i
                                                                    class="fa fa-edit mr-2"></i>
                                                                <input type="file" style="display: none;"
                                                                    class="form-control custom-file-upload"
                                                                    (change)="onFileChange($event)">Edit</span>
                                                        </label> -->
                                                    </div>
                                                </div>
                                                <div *ngIf="formGroup.controls.service_img.invalid && (formGroup.controls.service_img.dirty || formGroup.controls.service_img.touched || submit_button)"
                                                    class="">
                                                    <mat-error *ngIf="formGroup.controls.service_img.errors.required">
                                                        Please upload branch licence
                                                    </mat-error>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-form-field appearance="">
                                                    <mat-label>Description</mat-label>
                                                    <textarea matInput placeholder="Description"
                                                        formControlName="service_description"></textarea>
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_description.invalid && (formGroup.controls.service_description.dirty || formGroup.controls.service_description.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_description.errors.required">
                                                        Service description is required
                                                    </p>
                                                </div>
                                            </div>
                                            <!-- <div class="form-group">
                                                <mat-form-field class="example-chip-list">
                                                    <mat-label>Areas Covered</mat-label>
                                                    <mat-chip-list #chipList aria-label="Fruit selection">
                                                        <mat-chip *ngFor="let fruit of fruits" [selectable]="selectable"
                                                            [removable]="removable" (removed)="remove(fruit)">
                                                            {{fruit}}
                                                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                                        </mat-chip>
                                                        <input placeholder="Add More..." #fruitInput
                                                            [formControl]="fruitCtrl" [matAutocomplete]="auto"
                                                            [matChipInputFor]="chipList"
                                                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                            (matChipInputTokenEnd)="add($event)">
                                                    </mat-chip-list>
                                                    <mat-autocomplete #auto="matAutocomplete"
                                                        (optionSelected)="selected($event)">
                                                        <mat-option *ngFor="let fruit of filteredFruits | async"
                                                            [value]="fruit">
                                                            {{fruit}}
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </div> -->
                                            <div class="form-group">
                                                <mat-form-field>
                                                    <mat-label>Select Country</mat-label>
                                                    <mat-select formControlName="country" name="service_country"
                                                        (selectionChange)="getCities($event.value)">
                                                        <mat-option *ngFor="let country of countries"
                                                            [value]="country.isoCode">
                                                            {{country.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.country.invalid && (formGroup.controls.country.dirty || formGroup.controls.country.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.country.errors.required">
                                                        Country is required
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-form-field>
                                                    <mat-label>Area Covered City</mat-label>
                                                    <mat-select formControlName="city" name="service_city"
                                                        (selectionChange)="areaCovered($event)">
                                                        <mat-option *ngFor="let city of cities"
                                                            [value]="city.name">
                                                            {{city.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <!-- <ng-select [multiple]="true" formControlName="city" 
                                                (change)="areaCovered($event)"  placeholder="Area Covered">
                                                    <ng-option *ngFor="let city of cities"
                                                        [value]="city.name">
                                                        {{city.name}}</ng-option>
                                                </ng-select> -->
                                                <!-- <mat-form-field>
                                                    <mat-label>Area Covered</mat-label>
                                                    <mat-select (selectionChange)="areaCovered($event.value)" formControlName="city" placeholder="City"
                                                        name="service_city">
                                                        <mat-option *ngFor="let city of cities" [value]="city.name">
                                                            {{city.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field> -->
                                                <div *ngIf="formGroup.controls.city.invalid && (formGroup.controls.city.dirty || formGroup.controls.city.touched || submit_button)"
                                                    class="">
                                                    <!-- <p style="color: red;"
                                                        *ngIf="formGroup.controls.city.errors.required">
                                                        City is required
                                                    </p> -->
                                                </div>
                                            </div>
                                            <!-- <div class="form-group signup-form">
                                          
                                               
                                                <tag-input formControlName="keyWords" [(ngModel)]='areaCoveredArr'
                                                    maxItems="10" class="keywords--chips form-control height-unset"
                                                    [placeholder]="">
                                                </tag-input>
                                            </div> -->
                                            <div class="form-group">
                                                <mat-form-field>
                                                    <mat-label>Select Service Category</mat-label>
                                                    <mat-select (selectionChange)="getSubCat($event.value)"
                                                        formControlName="service_category"
                                                        placeholder="Select Service Category" name="service_category">
                                                        <mat-option *ngFor="let category of categiryArr"
                                                            [value]="category._id">
                                                            {{category.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_category.invalid && (formGroup.controls.service_category.dirty || formGroup.controls.service_category.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_category.errors.required">
                                                        Service Category is required
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-form-field>
                                                    <mat-label>Select Service Sub Category</mat-label>
                                                    <mat-select (selectionChange)="getProject($event)" placeholder="Select Service Sub-category"
                                                        formControlName="service_sub_category" name="service_category">
                                                        <mat-option *ngFor="let SubCat of subCatArr"
                                                            [value]="SubCat._id">
                                                            {{SubCat.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_sub_category.invalid && (formGroup.controls.service_sub_category.dirty || formGroup.controls.service_sub_category.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_sub_category.errors.required">
                                                        Service sub category is required
                                                    </p>
                                                </div>
                                            </div>
                                            <!-- <div class="form-group signup-form">
                                                <label for="exampleFormControlFile1">Add Service Image</label>
                                                <input type="file" class="form-control-file"
                                                    formControlName="service_img" id="exampleFormControlFile1"
                                                    (change)="onFileChange($event)">
                                            </div>
                                            <div *ngIf="formGroup.controls.service_img.invalid && (formGroup.controls.service_img.dirty || formGroup.controls.service_img.touched || submit_button)"
                                                class="">
                                                <p style="color: red;"
                                                    *ngIf="formGroup.controls.service_img.errors.required">
                                                    Please upload Service image
                                                </p>
                                            </div> -->


                                            <div class="form-group">
                                                <mat-label>Add Related Photos</mat-label>
                                                <div class="img-uploader-wrp">
                                                    <div class="img-prnt">
                                                        <ngx-dropzone-preview
                                                            *ngFor="let img of Service_data?.related_images; let i = index;"
                                                            [removable]="false" class="drpzne-related">
                                                            <ngx-dropzone-label>
                                                                <div class="drp-prnt">
                                                                    <img src="{{image_path}}{{img.name}}"
                                                                        class="img-fluid drp-thumb">
                                                                    <div class="btn btn-round-close"
                                                                        (click)="removeRelatedImage(i)">
                                                                        <div class="remove-badge-box">
                                                                            <ngx-dropzone-remove-badge
                                                                                _ngcontent-prs-c99=""
                                                                                _nghost-prs-c100=""
                                                                                class="ng-star-inserted">
                                                                                <svg _ngcontent-prs-c100="">
                                                                                    <line _ngcontent-prs-c100="" x1="0"
                                                                                        y1="0" x2="10" y2="10"></line>
                                                                                    <line _ngcontent-prs-c100="" x1="0"
                                                                                        y1="10" x2="10" y2="0"></line>
                                                                                </svg>
                                                                            </ngx-dropzone-remove-badge>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </ngx-dropzone-label>
                                                        </ngx-dropzone-preview>
                                                    </div>

                                                    <ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)"
                                                        class="margn-top">
                                                        <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview"
                                                            *ngFor="let f of files" [file]="f" [removable]="true"
                                                            (removed)="onRemove(f)">
                                                            <!-- <ngx-dropzone-label><span class="drop-img-lbl">{{ f.name }} ({{ f.type }})</span></ngx-dropzone-label> -->
                                                        </ngx-dropzone-image-preview>
                                                        <ngx-dropzone-label>
                                                            <div class="drp-upld-icn">
                                                                <i class="fa fa-upload" aria-hidden="true"></i>
                                                            </div>
                                                            <p class="drp-img-lbl">Add Files</p>
                                                        </ngx-dropzone-label>
                                                    </ngx-dropzone>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-label>Add Other Photos</mat-label>

                                                <div class="img-uploader-wrp">
                                                    <div class="img-prnt">
                                                        <ngx-dropzone-preview
                                                            *ngFor="let img of Service_data?.other_images; let i = index;"
                                                            [removable]="false" class="drpzne-related">
                                                            <ngx-dropzone-label>
                                                                <div class="drp-prnt">
                                                                    <video width="220" height="140" controls>
                                                                        <source src="{{image_path}}{{img.name}}" type="video/mp4">
                                                                      
                                                                      </video>
                                                                    <!-- <img src="{{image_path}}{{img.name}}"
                                                                        class="img-fluid drp-thumb"> -->
                                                                    <div class="btn btn-round-close"
                                                                        (click)="removeOtherImage(i)">
                                                                        <div class="remove-badge-box">
                                                                            <ngx-dropzone-remove-badge
                                                                                _ngcontent-prs-c99=""
                                                                                _nghost-prs-c100=""
                                                                                class="ng-star-inserted">
                                                                                <svg _ngcontent-prs-c100="">
                                                                                    <line _ngcontent-prs-c100="" x1="0"
                                                                                        y1="0" x2="10" y2="10"></line>
                                                                                    <line _ngcontent-prs-c100="" x1="0"
                                                                                        y1="10" x2="10" y2="0"></line>
                                                                                </svg>
                                                                            </ngx-dropzone-remove-badge>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </ngx-dropzone-label>
                                                        </ngx-dropzone-preview>
                                                    </div>

                                                    <ngx-dropzone (change)="onSelect1($event)" class="margn-top" accept="image/jpeg,image/jpg,image/png,image/gif">
                                                        <ngx-dropzone-label>
                                                            <div class="drp-upld-icn">
                                                                <i class="fa fa-upload" aria-hidden="true"></i>
                                                            </div>
                                                            <p class="drp-img-lbl">Add Files</p>
                                                        </ngx-dropzone-label>
                                                        <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview"
                                                            *ngFor="let f of files1" [file]="f" [removable]="true"
                                                            (removed)="onRemove1(f)">
                                                            <!-- <ngx-dropzone-label><span class="drop-img-lbl">{{ f.name }} ({{ f.type }})</span></ngx-dropzone-label> -->
                                                        </ngx-dropzone-image-preview>

                                                    </ngx-dropzone>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-form-field appearance="">
                                                    <mat-label>Price</mat-label>
                                                    <input matInput placeholder="Price" formControlName="service_price">
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_price.invalid && (formGroup.controls.service_price.dirty || formGroup.controls.service_price.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_price.errors.required">
                                                        Please add service price
                                                    </p>
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_price.errors.pattern">
                                                        Please add valid service price
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <mat-form-field appearance="">
                                                    <mat-label>Duration</mat-label>
                                                    <input matInput placeholder="Duration"
                                                        formControlName="service_duration">
                                                </mat-form-field>
                                                <div *ngIf="formGroup.controls.service_duration.invalid && (formGroup.controls.service_duration.dirty || formGroup.controls.service_duration.touched || submit_button)"
                                                    class="">
                                                    <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_duration.errors.required">
                                                        Please add service duration
                                                    </p>
                                                    <!-- <p style="color: red;"
                                                        *ngIf="formGroup.controls.service_duration.errors.pattern">
                                                        Please add valid service duration
                                                    </p> -->
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Add Projects</label>
                                                <div class="row">
                                                    <div id="page-content-wrapper">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <div class="added-proje-wrp mb-3">
                                                                    <div class="added-proj-img text-center">
                                                                        <a routerLink="/addProject">
                                                                            <div class="sign_txt_wrp">
                                                                                <i class="fa fa-plus"></i>
                                                                                <h3 class="text-center">New Project</h3>
                                                                            </div>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4" *ngFor="let project of projects;">
                                                                <div class="added-proj-wrp">
                                                                    <div class="added-proj-img">
                                                                        <img src="{{project_image_path}}{{project.project_images[0].name}}"
                                                                            alt="img" class="img-fluid">
                                                                            <div class="select-proj">
                                                                                <mat-checkbox #checkBox [checked]="selected_projects.includes(project._id) ? true : false"  [value]="project" (change)="getCheckbox(checkBox)"></mat-checkbox>
                                                                            </div>
                                                                        <div class="edit-picture">
                                                                            <i class="fa fa-pencil"></i>
                                                                        </div>
                                                                    </div>
                                                                    <div class="project-caption">
                                                                        <p>{{project.project_name}}</p>
                                                                        <p>{{project.project_images.length}} photos</p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="seller-prod-list-heading signup-form">
                                                    <label>This Service Will be Visible to</label><br />
                                                    <mat-checkbox class="example-margin"
                                                        formControlName="service_visible_professional">
                                                        Professional
                                                    </mat-checkbox>
                                                    <br />
                                                    <mat-checkbox class="example-margin"
                                                        formControlName="service_visible_customer">
                                                        Customer
                                                    </mat-checkbox>
                                                    <br />
                                                </div>
                                            </div>
                                            <div class="service--submt-btn" align="center">
                                                <button class="btn btn-change-fill" (click)="submit()">Update</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>